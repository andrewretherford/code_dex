{% extends 'base.html' %}


{% block categories %}
   {% with categories as categories %}
      {% include 'code_dex/navbar-categories.html' %}
   {% endwith %}
{% endblock categories %}
   

{% block main %}

<div class="home">
   <div class="file-view">
      <div class="display-window">
         <h1>{{ header }}</h1>
         {% for record in records %}
            <p>{{ record.title }}</p>
            <p>{{ record.category }}</p>
            {% if '.pdf' in record.file.url  %}
               <embed src="{{ record.file.url }}" width="800px" height="1080px"/>
            {% elif '.png' or '.jpg' in record.file.url %}
               <img src="{{ record.file.url }}" alt="{{ record.title }}">
            {% endif %}
            <div>
               <a class="btn btn-secondary d-inline-block"
                  {% if request.GET.category %}
                     href="{% url 'record_update' record.pk %}?next={{ request.path|urlencode }}&category={{ request.GET.category }}"
                  {% else %}
                     href="{% url 'record_update' record.pk %}?next={{ request.path|urlencode }}"
                  {% endif %}
               ><i class="bi bi-pencil"></i></a>
               <a class="btn btn-secondary d-inline-block"
                  {% if request.GET.category %}
                     href="{% url 'record_delete' record.pk %}?next={{ request.path|urlencode }}&category={{ request.GET.category }}"
                  {% else %}
                     href="{% url 'record_delete' record.pk %}?next={{ request.path|urlencode }}"
                  {% endif %}
               ><i class="bi bi-trash3"></i></a>
            </div>
            {% empty %}
            <p>No records found</p>
         {% endfor %}
      </div>
   </div>
</div>

{% endblock %}